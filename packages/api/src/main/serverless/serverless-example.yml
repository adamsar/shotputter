service:
  name: shotput-api

plugins:
  # If you want to use custom domains, install this plugin and uncomment this section
  #- serverless-domain-manager

provider:
  name: aws
  runtime: nodejs12.x
  timeout: 30

  environment:
    SHOTPUT_SLACK_CLIENT_ID:
    SHOTPUT_SLACK_DEFAULT_CHANNEL:
    SHOTPUT_GITHUB_TOKEN:
    SHOTPUT_GITHUB_DEFAULT_OWNER:
    SHOTPUT_GITHUB_DEFAULT_REPO:
    SHOTPUT_IMGUR_CLIENT_ID:

# If you want to use a custom VPC to run these lambda functions in.
#  vpc:
#    securityGroupIds:
#      -
#    subnetIds:
#      -
# Roles for posting images to s3
#  iamRoleStatements:
#    - Effect: "Allow"
#      Action: "s3:Put*"
#      Resource: "arn:aws:s3:::${S3_BUCKET}/*"


functions:

  app:
    handler: "./lambda.handler"
    events:
      - http:
          method: ANY
          path: "/"
          cors: true

      - http:
          method: ANY
          path: "{proxy+}"
          cors: true
